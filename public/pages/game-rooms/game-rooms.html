<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Game Rooms Page</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <link
      rel="stylesheet"
      type="text/css"
      href="/pages/game-rooms/game-rooms.css"
    />
    <link rel="stylesheet" type="text/css" href="/pages/global.css" />
    <script
      src="https://kit.fontawesome.com/f03c3defbc.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="container">
      <!-- create an overlay of the whole screen showing the instructions -->
      <div id="instruction-overlay" class="overlay">
        <div class="overlay-content">
          <h2>Instructions</h2>
          <p style="text-align: justify">
            In the mystical realm of Twilight, two players face off in a race
            against time. Their objective: collect twilight coinsâ€”a blend of sun
            and moon energyâ€”scattered throughout the shifting landscape. But
            there can be only one victor, and alliances are forbidden. As day
            turns to night, the stakes rise. Will you outwit your rival and
            claim the coins before twilight fades?
          </p>
          <h3>Instructions:</h3>
          <ul>
            <li>Collect 10 coins to win.</li>
            <li>Use teleporters strategically.</li>
            <li>Beware traps and rival hits.</li>
            <li>
              Trust <span style="color: red"><b>no one</b></span
              >. Both players seek victory.
            </li>
            <li>The Twin Monarchs watch as twilight fades.</li>
            <li>Step into the fading light and embrace destiny! ðŸŒ“âœ¨</li>
          </ul>
          <button id="close-instruction-button" class="secondary-button">
            Understood
          </button>
        </div>
      </div>

      <h1 id="game-title" style="text-align: left">Before Twilight</h1>

      <h2 style="text-align: left">Game Rooms</h2>
      <div
        class="game-room-container"
        style="
          display: flex;
          flex-direction: column;
          justify-content: space-evenly;
          gap: 5px;
        "
      >
        <div
          class=""
          style="
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 5px;
          "
        >
          <button id="instruction-button" class="secondary-button">
            <i
              class="fa-solid fa-chalkboard-user"
              style="margin-right: 4px"
            ></i>
            Instruction
          </button>
          <button id="log-out-button" class="secondary-button">
            <i
              class="fa-solid fa-right-from-bracket"
              style="margin-right: 4px"
            ></i
            >Log Out
          </button>
        </div>

        <div class="">
          <h4>Online Players</h4>
          <ul id="online-player-list">
            <li>user 1</li>
            <li>user 2</li>
            <li>user 3</li>
          </ul>
        </div>
      </div>

      <ul id="game-room-list" style="padding: 0">
        <li class="game-room-container" data-room="1">
          <h3>Room 1</h3>

          <div
            style="
              display: flex;
              align-items: center;
              justify-content: space-between;
              gap: 5px;
            "
          >
            <div class="player-container">
              <p style="font-weight: 600">Play 1</p>
              <p class="player-1-slot">Empty Slot</p>
              <button class="primary-button join-button">Join</button>
            </div>
            <div class="player-container">
              <p style="font-weight: 600">Play 2</p>
              <p class="player-2-slot">Empty Slot</p>
              <button class="primary-button join-button">Join</button>
            </div>
          </div>

          <button class="success-button start-button" data-start-btn="1">
            Start
          </button>
        </li>
        <li class="game-room-container" data-room="2">
          <h3>Room 2</h3>

          <div
            style="
              display: flex;
              align-items: center;
              justify-content: space-between;
              gap: 5px;
            "
          >
            <div class="player-container">
              <p style="font-weight: 600">Play 1</p>
              <p class="player-1-slot">Empty Slot</p>
              <button class="primary-button join-button">Join</button>
            </div>
            <div class="player-container">
              <p style="font-weight: 600">Play 2</p>
              <p class="player-2-slot">Empty Slot</p>

              <button class="primary-button join-button">Join</button>
            </div>
          </div>
          <button class="success-button start-button" data-start-btn="2">
            Start
          </button>
        </li>
        <li class="game-room-container" data-room="3">
          <h3>Room 3</h3>

          <div
            style="
              display: flex;
              align-items: center;
              justify-content: space-between;
              gap: 5px;
            "
          >
            <div class="player-container">
              <p style="font-weight: 600">Play 1</p>
              <p class="player-1-slot">Empty Slot</p>
              <button class="primary-button join-button">Join</button>
            </div>
            <div class="player-container">
              <p style="font-weight: 600">Play 2</p>
              <p class="player-2-slot">Empty Slot</p>

              <button class="primary-button join-button">Join</button>
            </div>
          </div>
          <button class="success-button start-button" data-start-btn="3">
            Start
          </button>
        </li>
      </ul>
    </div>
    <script src="/socket.io/socket.io.min.js"></script>
    <script src="scripts/socket.js"></script>
    <script src="scripts/authentication.js"></script>
    <script src="scripts/ui/game-rooms.js"></script>
    <script>
      $(function () {
        GameRooms.initialize();
        console.log("Game Rooms Page Loaded");

        Authentication.validate(
          () => {
            console.log("User is signed in.");
            Socket.connect();
            Socket.getRooms();
          },
          () => {
            console.log("User is not signed in.");
            alert("You are not signed in. Redirecting to sign in page...");
            window.location.href = "/";
          }
        );
      });
    </script>
  </body>
</html>
